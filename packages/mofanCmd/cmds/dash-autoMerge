#!/usr/bin/env node
const program = require("commander");
const shelljs = require("../utils/shelljsUtil");

program
  .command("autoMerge <target> <source>")
  .action(function (target, source) {
    console.log("current path", process.cwd());

    shelljs.exec(`git fetch`);
    shelljs.exec(`git checkout ${source}`);
    shelljs.exec(`git pull`);
    shelljs.exec(`git checkout ${target}`);
    shelljs.exec(`git pull`);
    shelljs.exec(`git merge ${source} --log`);
    shelljs.exec(`git push`);
  })
  .parse(process.argv);
